<!DOCTYPE html>
<html>

<head>
    <title></title>
    <meta charset="utf-8">
    <meta content="width=device-width,initial-scale=1.0" name="viewport">
    <style type="text/css">
        html,body{

        }
        h2{
            text-align: center;
        }
    </style>
</head>

<body>
<script type="text/javascript">
	/**
     * 格式化时间
     * @example this.formatDate(product.deltaSaleStartTime,'倒计时 HH小时mm分ss秒')
     * @param {number/date} value  时间
     * @param {string} fmt 格式
     * @param {number} offsetTimezone 需要偏移的时区
     * @return {string}     返回相关的格式化
     */
    function formatDate(value, fmt, offsetTimezone) {
        if(typeof (value) === "number" || typeof (value) === "string") {
            var offset = offsetTimezone;
            if(offset === undefined) {
                offset = 8 + new Date().getTimezoneOffset() / 60;
            }
            value = (+value) ;
            value = new Date(value);
        }
        var o = {
            "y+": value.getFullYear(), // 年份
            "M+": value.getMonth() + 1, // 月份
            "d+": value.getDate(), // 日
            "h+": value.getHours() % 12 === 0 ? 12 : value.getHours() % 12, // 小时
            "H+": value.getHours(), // 小时
            "m+": value.getMinutes(), // 分
            "s+": value.getSeconds(), // 秒
            // "q+" : Math.floor((value.getMonth()+3)/3), // 季度
            "S": value.getMilliseconds() // 毫秒
        };
        var week = {
            "0": "\u65e5",
            "1": "\u4e00",
            "2": "\u4e8c",
            "3": "\u4e09",
            "4": "\u56db",
            "5": "\u4e94",
            "6": "\u516d"
        };
        if(/(y+)/.test(fmt)) {
            fmt = fmt.replace(RegExp.$1, (value.getFullYear() + "").substr(4 - RegExp.$1.length));
        }
        if(/(E+)/.test(fmt)) {
            var fmtChar = (RegExp.$1.length > 2 ? "\u661f\u671f" : "\u5468");
            fmt = fmt.replace(RegExp.$1, ((RegExp.$1.length > 1) ? fmtChar : "") + week[value.getDay() + ""]);
        }
        for(var k in o) {
            if(new RegExp("(" + k + ")").test(fmt)) {
                fmt = fmt.replace(RegExp.$1, (RegExp.$1.length === 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
            }
        }
        return fmt;
    }
</script>
	<script type="text/javascript">

		// 隐藏或者显示答案
		var viewAnswer = window.location.search.indexOf('viewAnswer=true') > -1;
		if (viewAnswer) {
			var btns = document.getElementsByTagName('button');
			for (var i = btns.length - 1; i >= 0; i--) {
				btns[i].style.display = 'none';
			}
		}
		// 添加开始答题计时
		var isTiming = false;// 是否正在计时
		var eclipsedTime = 0; //已经过去的时间
		var startBtn = document.getElementById('start');
		var timerLabel = document.getElementById('timer');
		var chronometer;
		startBtn.onclick = function(){
			if (isTiming) {
				// ⏸
				if (chronometer) {
					window.clearInterval(chronometer);
					chronometer = null;
				}
			}else{
				// 继续
				chronometer = window.setInterval(function(){
					eclipsedTime += 1000;
					timer.innerHTML = formatDate(eclipsedTime,'HH小时mm分ss秒', -8);
				},1000);
			}
			//
			isTiming = !isTiming;
		}
		// 点击完成，计算总得分。
		//  参考答案数组
		var standardScore = [
			'D,E',//1
			'A,C','C,C',//2
			'C',//3
			'A','A','D',/****/'B','A','B','A',/****/'B','B',/****/'B',//4
			'A,B,E',//5
			'A,B',/****/'A,B',/****/'C,F',/****/'C',/****/'C,F',//6
			'A,C',//7
			'A'//8
		];
		var finishBtn = document.getElementById('finish');
		var scoreLabel = document.getElementById('score');

		finishBtn.onclick = function(){
			window.clearInterval(chronometer);
			chronometer = null;
			// 计算总得分。
			var rigthTotal = 0;
			var answerBtns = document.getElementsByName('answer');
			for (var i = answerBtns.length - 1; i >= 0; i--) {
				var answer = answerBtns[i].value;
				var standard = standardScore[i];
				if (answer.length == 0) {
					rigthTotal -= 0;
				}else if (answer == standard) {
					rigthTotal += 1;
				}else if(standard.indexOf(answer) > -1){
					rigthTotal +=0.5;
				}else{
					rigthTotal -=0.5;
				}
			}
			scoreLabel.innerHTML =  (rigthTotal/standardScore.length *100).toFixed(0);
		}
	</script>
</body>

</html>
